Version 4
SHEET 1 1672 1268
WIRE 224 -1232 -16 -1232
WIRE 352 -1232 224 -1232
WIRE 400 -1232 352 -1232
WIRE 512 -1232 480 -1232
WIRE -16 -1200 -16 -1232
WIRE 224 -1136 224 -1232
WIRE 272 -1136 224 -1136
WIRE 352 -1120 352 -1232
WIRE 352 -1120 336 -1120
WIRE -496 -1104 -544 -1104
WIRE -400 -1104 -496 -1104
WIRE -240 -1104 -320 -1104
WIRE -160 -1104 -240 -1104
WIRE -16 -1104 -16 -1136
WIRE -16 -1104 -80 -1104
WIRE 64 -1104 -16 -1104
WIRE 224 -1104 144 -1104
WIRE 272 -1104 224 -1104
WIRE -544 -1072 -544 -1104
WIRE -240 -1056 -240 -1104
WIRE 224 -1056 224 -1104
WIRE -544 -944 -544 -992
WIRE -240 -944 -240 -992
WIRE -240 -944 -544 -944
WIRE 224 -944 224 -992
WIRE 224 -944 -240 -944
WIRE -544 -896 -544 -944
WIRE 224 -848 -16 -848
WIRE 352 -848 224 -848
WIRE 400 -848 352 -848
WIRE 512 -848 480 -848
WIRE -16 -816 -16 -848
WIRE 224 -752 224 -848
WIRE 272 -752 224 -752
WIRE 352 -736 352 -848
WIRE 352 -736 336 -736
WIRE -480 -720 -544 -720
WIRE -400 -720 -480 -720
WIRE -240 -720 -320 -720
WIRE -160 -720 -240 -720
WIRE -16 -720 -16 -752
WIRE -16 -720 -80 -720
WIRE 64 -720 -16 -720
WIRE 224 -720 144 -720
WIRE 272 -720 224 -720
WIRE -544 -688 -544 -720
WIRE -240 -672 -240 -720
WIRE 224 -672 224 -720
WIRE -544 -560 -544 -608
WIRE -240 -560 -240 -608
WIRE -240 -560 -544 -560
WIRE 224 -560 224 -608
WIRE 224 -560 -240 -560
WIRE -544 -528 -544 -560
WIRE 320 -320 272 -320
WIRE 320 -288 320 -320
WIRE 320 -128 320 -208
WIRE -272 -32 -304 -32
WIRE 320 -32 304 -32
WIRE -304 0 -304 -32
WIRE 320 0 320 -32
WIRE -304 160 -304 80
WIRE 320 160 320 80
FLAG -544 -896 0
FLAG 512 -1232 Filter_50%
FLAG 320 -128 0
FLAG 272 -320 Settle_Time
FLAG -272 -32 Full_Scale_Fraction_p
FLAG -304 160 0
FLAG 512 -848 Filter_full_step
FLAG -496 -1104 IN_50%
FLAG -544 -528 0
FLAG 304 -32 Full_Scale_Fraction_m
FLAG 320 160 0
FLAG -480 -720 IN_full_step
SYMBOL res -304 -1120 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value {mc({r1}, rtol)}
SYMBOL res -64 -1120 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 34 64 VTop 2
SYMATTR InstName R2
SYMATTR Value {mc({r2}, rtol)}
SYMBOL res 160 -1120 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value {mc({r3}, rtol)}
SYMBOL cap -256 -1056 R0
WINDOW 0 24 8 Invisible 2
SYMATTR InstName C1
SYMATTR Value {mc({c1}, ctol)}
SYMBOL cap 240 -1056 M0
WINDOW 0 24 8 Invisible 2
SYMATTR InstName C3
SYMATTR Value {mc({c3}, ctol)}
SYMBOL cap 0 -1200 M0
WINDOW 0 46 33 Invisible 2
WINDOW 3 41 34 Left 2
SYMATTR InstName C2
SYMATTR Value {mc({c2}, ctol)}
SYMBOL voltage 320 -304 R0
WINDOW 0 24 16 Invisible 2
WINDOW 3 -667 55 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V9
SYMATTR Value PULSE(-1 1 0 10n 10n {Best_Settling_time} 100)
SYMBOL voltage -304 -16 R0
WINDOW 3 13 146 Left 2
WINDOW 39 0 0 Left 0
WINDOW 0 17 16 Invisible 2
SYMATTR Value {Full_Scale_Fraction}
SYMATTR InstName V10
SYMATTR Value2 AC 1
SYMBOL OpAmps\\opamp 304 -1184 R0
WINDOW 0 -5 25 Invisible 2
SYMATTR InstName U1
SYMATTR SpiceLine Aol=10Meg
SYMATTR SpiceLine2 GBW=10G
SYMBOL voltage 384 -1232 R270
WINDOW 0 32 56 Invisible 2
WINDOW 3 -32 56 VBottom 2
SYMATTR InstName V8
SYMATTR Value .5
SYMBOL voltage 384 -848 R270
WINDOW 0 32 56 Invisible 2
WINDOW 3 -32 56 VBottom 2
SYMATTR InstName V15
SYMATTR Value 1
SYMBOL voltage 320 -16 R0
WINDOW 3 -281 143 Left 2
WINDOW 39 0 0 Left 0
WINDOW 0 17 16 Invisible 2
SYMATTR Value {-Full_Scale_Fraction}
SYMATTR InstName V4
SYMATTR Value2 AC 1
SYMBOL voltage -544 -704 R0
WINDOW 3 -324 56 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 15 16 Invisible 2
SYMATTR Value PULSE(0 1 0 .1u .1u 1 2)
SYMATTR InstName V7
SYMBOL voltage -544 -1088 R0
WINDOW 3 -754 57 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 24 16 Invisible 2
SYMATTR Value PULSE(0 1 0 .001u .001u {.5/pwm_Hz - .001u} {1/pwm_Hz})
SYMATTR InstName V5
SYMBOL res -304 -736 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value {mc({r1}, rtol)}
SYMBOL res -64 -736 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 34 64 VTop 2
SYMATTR InstName R5
SYMATTR Value {mc({r2}, rtol)}
SYMBOL res 160 -736 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value {mc({r3}, rtol)}
SYMBOL cap -256 -672 R0
WINDOW 0 24 8 Invisible 2
SYMATTR InstName C4
SYMATTR Value {mc({c1}, ctol)}
SYMBOL cap 240 -672 M0
WINDOW 0 24 8 Invisible 2
SYMATTR InstName C5
SYMATTR Value {mc({c3}, ctol)}
SYMBOL cap 0 -816 M0
WINDOW 0 46 33 Invisible 2
WINDOW 3 41 34 Left 2
SYMATTR InstName C6
SYMATTR Value {mc({c2}, ctol)}
SYMBOL OpAmps\\opamp 304 -800 R0
WINDOW 0 -5 25 Invisible 2
SYMATTR InstName U2
SYMATTR SpiceLine Aol=10Meg
SYMATTR SpiceLine2 GBW=10G
TEXT -1272 -64 Left 2 !.include standard.txt\n \n.tran 1u {Best_Settling_time*1.5} 0\n.options plotwinsize 0\n.plot standard.plt\n \n.lib opamp.sub
TEXT 352 -1072 Center 2 ;Near ideal\n op amp
TEXT 352 -688 Center 2 ;Near ideal\n op amp
TEXT -1264 -472 Left 2 ;NOTE: set capacitor and resistor tolerances\nas fractions, not percentages - .01 is 1%.
TEXT -1272 -384 Left 2 !.param ctol .01\n.param rtol .01
TEXT -1272 -288 Left 2 ;Set the number of Monte Carlo runs, \nthe 3rd parameter in the following \n.step params command.
TEXT -1272 -168 Left 2 !.step param X 0 100 1
RECTANGLE Normal -672 -128 -1296 -496
